<!DOCTYPE html>
<html lang="en">
<head>
    {{> header}}
</head>
<body>
    
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
            {{> navbar}}
    </nav>

    
    
    <div class="container">

        <div class="row">
            
            <h2>CARRITO!</h2>

            {{#if prods}}

                <div class="col-md-8">

                    <table class="table table-bordered">
                        <form name="cart" action="/checkout" method="post">
                            <thead>
                                <tr>
                                    <th scope="col">Nombre</th>
                                    <th scope="col">Precio</th>
                                    <th scope="col">Cantidad</th>
                                    <th scope="col">Foto</th>
                                    <th scope="col">Acci√≤n</th>
                                </tr>
                            </thead>
                            <tbody>

                                {{#each prods}}
                                    <tr>
                                        <input type="hidden" name="prodId" value="{{this._id}}">
                                        <input type="hidden" name="prodName" value="{{this.name}}">
                                        <input type="hidden" name="prodPrice" value="{{this.price}}">
                                        <td>{{this.name}}</td>
                                        <td>$ {{this.price}}</td>
                                        <td>
                                            <select class="form-select" name="cantProd">
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                            </select>
                                        </td>
                                        <td>
                                            {{#if this.thumbnail}}
                                                <img style="max-width:25%;" src="{{this.thumbnail}}" alt="imagen de producto">
                                            {{else}}
                                                <img style="max-width: 25%;" src="https://cdn0.iconfinder.com/data/icons/images-image-files/24/photo_photography_image_picture_no_disable-512.png" alt="Producto sin imagen">
                                            {{/if}}
                                        </td>
                                        <td>
                                            <a href="#" data-prod-id="{{this._id}}" class="btn btn-danger remove-from-cart">Quitar</a>
                                        </td>
                                        
                                    </tr>
                                {{/each}}
                                <tr>
                                    <td>Monto total</td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td>$ {{totalPrice}}</td>
                                </tr>
                                
                            </tbody>

                            <button type="submit" class="btn btn-success">FINALIZAR COMPRA</button>

                        </form>
                    </table>
                                

                </div>

                <div class="col-md-4">
                    <a href="/checkuot">Finalizar Compra</a>
                </div>

            {{else}}

                <div class="col-md-12">
                    <div class="alert alert-warning">
                        <p>Sin productos</p>
                        <p>No hay productos en tu carrito</p>
                    </div>
                </div>

            {{/if}}

        </div><!-- ./row -->

    </div><!-- /.container -->


    <script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
    <script src="./js/cart.js"></script>
</body>
</html>